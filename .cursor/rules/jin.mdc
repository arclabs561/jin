---
title: "Jin Rules"
id: jin-rules
description: "Rules for Jin ANN indexing primitives"
priority: 100
alwaysApply: true
---

# Jin Rules

## General Principles

- **Performance is critical**: This is the indexing primitive for the entire stack.
- **Zero-copy**: Avoid unnecessary allocations.
- **SIMD**: Use SIMD where possible (via `innr` or `simsimd`).

## Architecture

Jin provides standalone ANN algorithms:
- HNSW
- IVF-PQ
- DiskANN
- ScaNN

**Rule**: Do not add heavy dependencies. Jin is a primitive used by `stratify`, `hop`, and other consumers.

## Rust Standards

- All code must compile (`cargo check`).
- All code must be formatted (`cargo fmt`).
- All clippy warnings must be fixed (`cargo clippy -- -D warnings`).
- Tests should pass (`cargo test`).
- Use `Result<T, E>` for fallible operations.
- Avoid `unwrap()` in production code.

## Documentation

- Comprehensive docstrings explaining algorithm details.
- Benchmarks are required for performance claims.

## Integration

Jin is used by:
- `stratify`: kNN graph construction for clustering
- `hop`: Document embedding search

## Dependencies

- `innr`: SIMD primitives (optional)
- `cnk`: ID compression (optional)

## Anti-Sycophancy

- Challenge assumptions and identify issues.
- Present alternative approaches with trade-offs.
- Use direct technical language.

See also: `tekne-stack-base.mdc` for shared Rust standards.
